<form #formulario="ngForm" (ngSubmit)="enviar(formulario)" autocomplete="off">
  <div class="form-group">
    <label>Nombre del producto
    </label>
    <input type="text" class="form-control" [(ngModel)]="producto.nombre" required minlength="4" #nombre="ngModel" name="nombre">
    <small class="text-danger" *ngIf="nombre.touched && nombre.invalid">
      El nombre del producto debe tener al menos 4 caracteres </small>
  </div>



  <div class="form-group precio">
    <label>Precio</label>
    <input type="number" class="form-control" [(ngModel)]="producto.precio" name="precio" required #precio="ngModel">
    <small class="text-danger" *ngIf="precio.touched && precio.invalid">
        El precio del producto es requerido</small>
  </div>

  <fieldset>
    <legend>Origen</legend>
    <div class="form-check">
      <label class="form-check-label">
        <input type="radio" class="form-check-input" name="origen" id="" [value]="true" [(ngModel)]="producto.esNacional"
          (ngModelChange)="producto.pais='mx'">
        Nacional
      </label>
    </div>

    <div class="form-check">
      <label class="form-check-label">
        <input type="radio" class="form-check-input" name="origen" id="" [value]="false" [(ngModel)]="producto.esNacional"
          (ngModelChange)="producto.pais='us'">
        Importado
      </label>
    </div>

    <div *ngIf="!producto.esNacional">
      <div class="form-group">
        <label for="">Pais de origen</label>
        <select class="form-control" name="pais" id="" [(ngModel)]="producto.pais">
          <option value="ca">Canadá</option>
          <option value="us" selected>Estados Unidos</option>
          <option value="fr">Francia</option>
        </select>
      </div>
    </div>

  </fieldset>

  <!-- <p>El producto es <span class="text-info">{{producto | json}}</span></p>

  <p>El precio del producto es <span class="text-info">
      {{producto.precio | currency}}</span></p> -->

  <button *ngIf="producto.id === undefined" type="submit" class="btn btn-primary"
  [disabled]="formulario.invalid">Agregar</button>
  <button *ngIf="producto.id !== undefined" type="button" class="btn btn-info"
  [disabled]="formulario.invalid" (click)="actualizar()">Actualizar</button>
  <button *ngIf="producto.id !== undefined" type="button" class="btn btn-danger"
  [disabled]="formulario.invalid" (click)="cancelar()">Cancelar</button>

</form>

<h2 class="mt-3">Catálogo de Productos</h2>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Precio</th>
      <th>Pais</th>
      <th>Opciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of catalogo">
      <td>{{p.nombre}}</td>
      <td>{{p.precio | currency}}</td>
      <td>{{p.pais}}</td>
      <td>
        <button class="btn btn-sm btn-info" (click)="editar(p.id)"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> </button>
        <button class="btn btn-sm btn-danger" (click)="eliminar(p.id)"> <i class="fa fa-trash-o" aria-hidden="true"></i> </button>
      </td>
    </tr>
  </tbody>
</table>
